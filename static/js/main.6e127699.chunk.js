(this["webpackJsonpcovid-app"]=this["webpackJsonpcovid-app"]||[]).push([[0],{204:function(e,t,r){},205:function(e,t,r){"use strict";r.r(t);var n,a=r(1),c=r(0),o=r.n(c),s=r(66),i=r.n(s),u=r(23),d=r(2),j=r(25),l=r(5),b=Object(c.createContext)(void 0),h=Object(c.createContext)(void 0),O=function(e){var t=e.children,r=Object(c.useState)(""),n=Object(l.a)(r,2),o=n[0],s=n[1];return Object(a.jsx)(b.Provider,{value:o,children:Object(a.jsx)(h.Provider,{value:s,children:t})})},f=function(){var e=Object(c.useContext)(b);if(null==e)throw new Error("useSearchState must be used within a SearchProvider");return e},p=r(24),g=r.n(p),x=r(67),v=r(68),m=r.n(v);!function(e){e.INIT="INIT",e.SUCCESS="SUCCESS",e.FAILURE="FAILURE"}(n||(n={}));var C=function(e,t){switch(t.type){case n.INIT:return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0,isError:!1});case n.SUCCESS:return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,isError:!1,data:t.payload});case n.FAILURE:return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,isError:!0});default:throw new Error}},w=function(e,t){var r=Object(c.useState)(e),a=Object(l.a)(r,2),o=a[0],s=a[1],i=Object(c.useReducer)(C,{isLoading:!1,isError:!1,data:t}),u=Object(l.a)(i,2),d=u[0],j=u[1];return Object(c.useEffect)((function(){(function(){var e=Object(x.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j({type:n.INIT}),e.prev=1,e.next=4,m.a.get(o,{headers:{Authorization:"X-Access-Token5cf9dfd5-3449-485e-b5ae-70a60e997864"}});case 4:t=e.sent,j({type:n.SUCCESS,payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),j({type:n.FAILURE});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[o]),[d,s]},S=r(69),F=r.n(S),N=function(e){return Object(a.jsx)("div",{className:"input-group mb-3",children:Object(a.jsx)("input",Object(d.a)(Object(d.a)({},e),{},{onChange:function(t){e.onChange(t,{newValue:t.target.value,method:"type"})},type:"text",className:"form-control","aria-label":"Country","aria-describedby":"inputGroup-sizing-default"}))})},y=function(e){var t=e.containerProps,r=e.children;e.query;return r?Object(a.jsx)("ul",Object(d.a)(Object(d.a)({},t),{},{className:"list-group",children:Object(a.jsxs)("li",{className:"list-group-item",children:[" ",r," "]})})):null},P=function(){var e=w(T,[]),t=Object(l.a)(e,1)[0].data,r=Object(c.useState)([]),n=Object(l.a)(r,2),s=n[0],i=n[1],u=Object(c.useState)([]),d=Object(l.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(""),f=Object(l.a)(O,2),p=f[0],g=f[1],x=function(){var e=o.a.useContext(h);if(null==e)throw new Error("useSearchDispatch must be used within a SearchProvider");return e}();Object(c.useEffect)((function(){if(t&&t.Countries){var e=t.Countries.map((function(e){return e.Country}));b(e),i(e)}}),[t]);var v={placeholder:"Type a country",value:p,onChange:function(e,t){var r=t.newValue;e.preventDefault(),g(r),""===r&&x(r)}};return Object(a.jsx)(F.a,{suggestions:j,onSuggestionsFetchRequested:function(e){var t=e.value;e.reason;b(function(e){var t=e.trim().toLowerCase(),r=t.length;return 0===r?[]:s.filter((function(e){return e.toLowerCase().slice(0,r)===t}))}(t))},getSuggestionValue:function(e){return e},renderSuggestion:function(e){return Object(a.jsx)("div",{children:e})},onSuggestionSelected:function(e,t){t.suggestion;var r=t.suggestionValue;x(r),g(r)},onSuggestionsClearRequested:function(){return b([])},renderInputComponent:N,renderSuggestionsContainer:y,inputProps:v})},E=function(e){var t=e.column.setFilter,r=f();return Object(c.useEffect)((function(){t(r)}),[r]),Object(a.jsx)(P,{})},I=function(e){var t=e.columns,r=e.data,n=(f(),o.a.useMemo((function(){return{Header:"",Filter:E}}),[])),s=Object(j.useTable)({columns:t,data:r,defaultColumn:n,initialState:{pageIndex:0,pageSize:20}},j.useFilters,j.usePagination),i=s.getTableProps,u=s.getTableBodyProps,l=s.headerGroups,b=s.prepareRow,h=s.footerGroups,O=s.page,p=s.canPreviousPage,g=s.canNextPage,x=s.pageOptions,v=s.nextPage,m=s.previousPage,C=s.state,w=C.pageIndex;C.pageSize;return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsxs)("table",Object(d.a)(Object(d.a)({className:"table"},i()),{},{children:[Object(a.jsx)("thead",{className:"thead-light",children:l.map((function(e){return Object(a.jsx)("tr",Object(d.a)(Object(d.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(a.jsxs)("th",Object(d.a)(Object(d.a)({scope:"col"},e.getHeaderProps()),{},{children:[e.render("Header"),Object(a.jsx)("div",{children:e.canFilter&&"Country"===e.Header?e.render("Filter"):null})]}))}))}))}))}),Object(a.jsx)("tbody",Object(d.a)(Object(d.a)({},u()),{},{children:O.map((function(e,t){return b(e),Object(a.jsx)("tr",Object(d.a)(Object(d.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(a.jsx)("td",Object(d.a)(Object(d.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))})),Object(a.jsx)("tfoot",{children:h.map((function(e){return Object(a.jsx)("tr",Object(d.a)(Object(d.a)({},e.getFooterGroupProps()),{},{children:e.headers.map((function(e){return Object(a.jsx)("td",Object(d.a)(Object(d.a)({},e.getFooterProps()),{},{children:e.render("Footer")}))}))}))}))})]})),Object(a.jsxs)("div",{className:"pagination",children:[Object(a.jsx)("button",{onClick:function(){return m()},disabled:!p,children:"<"})," ",Object(a.jsx)("button",{onClick:function(){return v()},disabled:!g,children:">"})," ",Object(a.jsxs)("span",{children:["Page"," ",Object(a.jsxs)("strong",{children:[w+1," of ",x.length]})," "]})]})]})},L=r(3),T="https://api.covid19api.com/summary",R=function(e){var t=e.title,r=e.path,n=Object(L.f)();return Object(a.jsx)("button",{type:"button",onClick:function(){return n.push(r)},children:t})},k=function(e,t){return e.rows.reduce((function(e,r){return r.values[t]+e}),0)},H=[{Header:"Country",accessor:"Country"},{Header:"Deaths",accessor:"NewDeaths",Footer:function(e){var t=o.a.useMemo((function(){return k(e,"NewDeaths")}),[e.rows]);return Object(a.jsxs)(a.Fragment,{children:["Total: ",Object(a.jsx)("div",{children:t})]})}},{Header:"Recovered",accessor:"NewRecovered",Footer:function(e){var t=o.a.useMemo((function(){return k(e,"NewRecovered")}),[e.rows]);return Object(a.jsxs)(a.Fragment,{children:["Total: ",Object(a.jsx)("div",{children:t})]})}},{Header:"New Cases",accessor:"NewConfirmed",Footer:function(e){var t=o.a.useMemo((function(){return k(e,"NewConfirmed")}),[e.rows]);return Object(a.jsxs)(a.Fragment,{children:["Total: ",Object(a.jsx)("div",{children:t})]})}}],A=function(){var e=w(T,null),t=Object(l.a)(e,1)[0],r=t.data,n=t.isError,c=t.isLoading,s=o.a.useMemo((function(){return H}),[]),i=o.a.useMemo((function(){if(r)return r.Countries}),[r]);return Object(a.jsxs)(O,{children:[Object(a.jsx)(R,{title:"View Chart",path:"/chart"}),c&&Object(a.jsx)("div",{children:" Loading ... "}),n&&Object(a.jsx)("div",{children:"An error occurred. Try to refresh the browser. "}),i&&Object(a.jsx)(I,{columns:s,data:i})]})},D=r(71),U=function(e){var t=e.data;return Object(a.jsx)(D.Bar,{data:t,width:1e3,height:1e3,options:{maintainAspectRatio:!1,responsive:!0}})},M={labels:[],datasets:[{label:"New Cases",data:[],backgroundColor:"#FFFF00",width:5},{label:"New Deaths",data:[],backgroundColor:"#FF0000",width:5},{label:"New Recovered",data:[],backgroundColor:"#74B649",width:5}]},V=function(){var e=w(T,[]),t=Object(l.a)(e,1)[0],r=t.data,n=t.isError,o=t.isLoading;return Object(c.useEffect)((function(){if(r&&r.Countries&&r.Countries.length>0){var e=r.Countries.map((function(e){return e.Country}));M.labels=e,r.Countries.forEach((function(e){M.datasets[0].data.push(e.NewConfirmed),M.datasets[1].data.push(e.NewDeaths),M.datasets[2].data.push(e.NewRecovered)}))}}),[r]),console.log("datasets",M),Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(R,{title:"View Table",path:"/"}),o&&Object(a.jsx)(a.Fragment,{children:" Loading "}),n&&Object(a.jsx)(a.Fragment,{children:" Something went wrong. Please refresh the browser "}),r&&r.Countries&&Object(a.jsx)(U,{data:M})]})},B=function(){return Object(a.jsxs)(L.c,{children:[Object(a.jsx)(L.a,{exact:!0,path:"/",component:A}),Object(a.jsx)(L.a,{path:"/chart",component:V})]})},G=function(){return Object(a.jsx)(u.a,{children:Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(B,{})})})},z=(r(203),r(204),function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,206)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))});i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(G,{})}),document.getElementById("root")),z(console.log)}},[[205,1,2]]]);
//# sourceMappingURL=main.6e127699.chunk.js.map